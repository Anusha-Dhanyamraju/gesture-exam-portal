{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dhany\\\\Downloads\\\\gesture-exam-projectgpt\\\\frontend\\\\src\\\\pages\\\\Exam.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Exam() {\n  _s();\n  const [questions, setQuestions] = useState([]);\n  const [answers, setAnswers] = useState({});\n  const [activeQuestion, setActiveQuestion] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [status, setStatus] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [gestureInfo, setGestureInfo] = useState(\"Gesture keyboard loading...\");\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // -------- FETCH QUESTIONS --------\n  useEffect(() => {\n    async function fetchQuestions() {\n      try {\n        setLoading(true);\n        const res = await axios.get(\"http://localhost:5000/api/questions\");\n        setQuestions(res.data || []);\n      } catch (err) {\n        console.error(err);\n        setError(\"Failed to load questions.\");\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchQuestions();\n  }, []);\n\n  // -------- ANSWER HANDLING --------\n  function handleAnswerChange(index, value) {\n    setAnswers(prev => ({\n      ...prev,\n      [\"Q\" + (index + 1)]: value\n    }));\n  }\n  function handleFocusQuestion(index) {\n    setActiveQuestion(index);\n  }\n\n  // -------- VIRTUAL KEYBOARD --------\n  const keyboardRows = [\"QWERTYUIOP\", \"ASDFGHJKL\", \"ZXCVBNM\"];\n  function typeOnActive(key) {\n    if (activeQuestion === null) return;\n    const qKey = \"Q\" + (activeQuestion + 1);\n    const current = answers[qKey] || \"\";\n    if (key === \"SPACE\") {\n      handleAnswerChange(activeQuestion, current + \" \");\n    } else if (key === \"BACKSPACE\") {\n      handleAnswerChange(activeQuestion, current.slice(0, -1));\n    } else if (key === \"CLEAR\") {\n      handleAnswerChange(activeQuestion, \"\");\n    } else {\n      handleAnswerChange(activeQuestion, current + key);\n    }\n  }\n\n  // -------- SUBMIT EXAM --------\n  async function handleSubmit() {\n    try {\n      setStatus(\"\");\n      setError(\"\");\n      if (questions.length === 0) {\n        setError(\"No questions to submit.\");\n        return;\n      }\n      let score = 0;\n      questions.forEach((q, idx) => {\n        const key = \"Q\" + (idx + 1);\n        const userAns = (answers[key] || \"\").trim().toLowerCase();\n        const correct = (q.answer || \"\").trim().toLowerCase();\n        if (correct && userAns === correct) score++;\n      });\n      const rollNumber = localStorage.getItem(\"studentRollNumber\") || \"Unknown Roll\";\n      const name = localStorage.getItem(\"studentName\") || \"Student\";\n      const payload = {\n        rollNumber,\n        name,\n        answers,\n        score\n      };\n      const res = await axios.post(\"http://localhost:5000/api/submit-exam\", payload);\n      if (res.data.success) {\n        setStatus(`âœ… Exam submitted successfully! Score: ${score}/${questions.length}`);\n      } else {\n        setError(\"Failed to submit exam.\");\n      }\n    } catch (err) {\n      console.error(err);\n      setError(\"Server error while submitting exam.\");\n    }\n  }\n\n  // -------- GESTURE KEYBOARD (MEDIAPIPE HANDS) --------\n  useEffect(() => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    if (!video || !canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    let stream;\n    let hands = null;\n    let rafId = null;\n    let hoverStart = null;\n    let hoverKeyEl = null;\n    let lastSelectTime = 0;\n\n    // helper: load external script\n    const loadScript = src => new Promise((resolve, reject) => {\n      if (document.querySelector(`script[src=\"${src}\"]`)) {\n        resolve();\n        return;\n      }\n      const s = document.createElement(\"script\");\n      s.src = src;\n      s.async = true;\n      s.onload = () => resolve();\n      s.onerror = e => reject(new Error(\"Failed to load script: \" + src));\n      document.body.appendChild(s);\n    });\n    async function setup() {\n      try {\n        setGestureInfo(\"Starting webcam...\");\n        // start webcam\n        stream = await navigator.mediaDevices.getUserMedia({\n          video: {\n            width: 1280,\n            height: 720\n          },\n          audio: false\n        });\n        video.srcObject = stream;\n        await video.play();\n\n        // match canvas size to video\n        canvas.width = video.videoWidth || 1280;\n        canvas.height = video.videoHeight || 720;\n        setGestureInfo(\"Loading hand tracking...\");\n\n        // load mediapipe scripts\n        await loadScript(\"https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.3/drawing_utils.js\");\n        await loadScript(\"https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4/hands.js\");\n        if (!window.Hands) {\n          throw new Error(\"MediaPipe Hands not available on window\");\n        }\n        hands = new window.Hands({\n          locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4/${file}`\n        });\n        hands.setOptions({\n          maxNumHands: 1,\n          modelComplexity: 1,\n          minDetectionConfidence: 0.7,\n          minTrackingConfidence: 0.6\n        });\n        hands.onResults(onResults);\n        setGestureInfo(\"âœ… Gesture keyboard ready: move index finger over keys and pinch to type.\");\n\n        // processing loop\n        const loop = async () => {\n          if (video.readyState >= 2 && hands) {\n            await hands.send({\n              image: video\n            });\n          }\n          rafId = requestAnimationFrame(loop);\n        };\n        loop();\n      } catch (err) {\n        console.error(err);\n        setGestureInfo(\"âš ï¸ Gesture keyboard disabled: \" + err.message);\n      }\n    }\n    function onResults(results) {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      if (!results.multiHandLandmarks || results.multiHandLandmarks.length === 0) return;\n      const landmarks = results.multiHandLandmarks[0];\n\n      // draw landmarks (if drawing utils loaded)\n      if (window.drawConnectors && window.drawLandmarks && window.Hands) {\n        try {\n          window.drawConnectors(ctx, landmarks, window.Hands.HAND_CONNECTIONS, {\n            color: \"#00FF00\",\n            lineWidth: 3\n          });\n          window.drawLandmarks(ctx, landmarks, {\n            color: \"#FF0000\",\n            lineWidth: 1\n          });\n        } catch (e) {\n          // ignore drawing errors\n        }\n      }\n\n      // index finger tip in video space\n      const indexTip = landmarks[8];\n      const thumbTip = landmarks[4];\n      const canvasX = indexTip.x * canvas.width;\n      const canvasY = indexTip.y * canvas.height;\n\n      // draw pointer circle\n      ctx.fillStyle = \"rgba(0, 123, 255, 0.9)\";\n      ctx.beginPath();\n      ctx.arc(canvasX, canvasY, 10, 0, Math.PI * 2);\n      ctx.fill();\n\n      // map to page coords to hit test keyboard keys\n      const videoRect = video.getBoundingClientRect();\n      const pageX = videoRect.left + indexTip.x * videoRect.width;\n      const pageY = videoRect.top + indexTip.y * videoRect.height;\n\n      // find hovered key\n      const keyElems = Array.from(document.querySelectorAll(\".gesture-key\"));\n      let currentlyHovered = null;\n      keyElems.forEach(el => {\n        const rect = el.getBoundingClientRect();\n        if (pageX >= rect.left && pageX <= rect.right && pageY >= rect.top && pageY <= rect.bottom) {\n          currentlyHovered = el;\n          el.style.backgroundColor = \"#3b82f6\";\n          el.style.color = \"#ffffff\";\n          el.style.transform = \"scale(1.08)\";\n        } else {\n          el.style.backgroundColor = \"#e5e7eb\";\n          el.style.color = \"#111827\";\n          el.style.transform = \"scale(1.0)\";\n        }\n      });\n\n      // dwell/pinch logic\n      const now = Date.now();\n\n      // measure distance between thumb and index tip\n      const dx = thumbTip.x - indexTip.x;\n      const dy = thumbTip.y - indexTip.y;\n      const dist = Math.sqrt(dx * dx + dy * dy); // 0..1 (normalized)\n\n      const PINCH_THRESHOLD = 0.05; // smaller = closer pinch\n      const COOLDOWN = 600; // ms\n\n      if (currentlyHovered) {\n        if (hoverKeyEl !== currentlyHovered) {\n          // new key hovered\n          hoverKeyEl = currentlyHovered;\n          hoverStart = now;\n        }\n\n        // detect pinch + cooldown\n        if (dist < PINCH_THRESHOLD && now - lastSelectTime > COOLDOWN) {\n          const keyVal = hoverKeyEl.dataset.key || hoverKeyEl.innerText.trim();\n          typeOnActive(keyVal);\n          lastSelectTime = now;\n\n          // small flash effect\n          hoverKeyEl.style.opacity = \"0.7\";\n          setTimeout(() => {\n            if (hoverKeyEl) hoverKeyEl.style.opacity = \"1\";\n          }, 150);\n        }\n      } else {\n        hoverKeyEl = null;\n        hoverStart = null;\n      }\n    }\n    setup();\n\n    // cleanup\n    return () => {\n      if (rafId) cancelAnimationFrame(rafId);\n      if (hands && hands.close) hands.close();\n      if (stream) {\n        stream.getTracks().forEach(t => t.stop());\n      }\n    };\n  }, [answers, activeQuestion]); // deps just to rebind typeOnActive correctly\n\n  // -------- RENDER --------\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.page,\n    children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.errorBanner,\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 17\n    }, this), status && !error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.statusBanner,\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 28\n    }, this), gestureInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.gestureInfoBanner,\n      children: gestureInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.fullScreenWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        muted: true,\n        playsInline: true,\n        style: styles.webcam\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: styles.canvasOverlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.bottomOverlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"gesture-keyboard\",\n        style: styles.keyboardWrapper,\n        children: [keyboardRows.map((row, rIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.keyboardRow,\n          children: row.split(\"\").map((ch, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gesture-key\",\n            \"data-key\": ch,\n            style: styles.key,\n            onClick: () => typeOnActive(ch),\n            children: ch\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 17\n          }, this))\n        }, rIndex, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.keyboardRow,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gesture-key\",\n            \"data-key\": \"SPACE\",\n            style: {\n              ...styles.key,\n              flex: 3.5,\n              fontSize: \"22px\"\n            },\n            onClick: () => typeOnActive(\"SPACE\"),\n            children: \"SPACE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gesture-key\",\n            \"data-key\": \"BACKSPACE\",\n            style: {\n              ...styles.key,\n              flex: 1.5,\n              fontSize: \"22px\"\n            },\n            onClick: () => typeOnActive(\"BACKSPACE\"),\n            children: \"\\u232B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gesture-key\",\n            \"data-key\": \"CLEAR\",\n            style: {\n              ...styles.key,\n              flex: 1.5,\n              fontSize: \"20px\"\n            },\n            onClick: () => typeOnActive(\"CLEAR\"),\n            children: \"CLEAR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.questionsPanel,\n        children: [loading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading questions...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 23\n        }, this), !loading && questions.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No questions available. Contact admin.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }, this), !loading && questions.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: styles.panelTitle,\n            children: \"Questions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.questionsScroll,\n            children: questions.map((q, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.questionCard,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: styles.questionText,\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: [\"Q\", idx + 1, \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 23\n                }, this), \" \", q.question || q.q || \"Question\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                style: styles.textarea,\n                placeholder: \"Type your answer here...\",\n                value: answers[\"Q\" + (idx + 1)] || \"\",\n                onChange: e => handleAnswerChange(idx, e.target.value),\n                onFocus: () => handleFocusQuestion(idx)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 21\n              }, this), activeQuestion === idx && /*#__PURE__*/_jsxDEV(\"p\", {\n                style: styles.activeHint,\n                children: \"\\uD83D\\uDD35 Keyboard / gestures typing here\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 23\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.submitBtn,\n            onClick: handleSubmit,\n            children: \"Submit Exam\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 324,\n    columnNumber: 5\n  }, this);\n}\n_s(Exam, \"Sbm7yE36C3b/hGS2SRR91QxCnQU=\");\n_c = Exam;\nconst styles = {\n  page: {\n    background: \"#000\",\n    minHeight: \"100vh\",\n    margin: 0,\n    padding: 0,\n    position: \"relative\",\n    color: \"#fff\",\n    fontFamily: \"sans-serif\"\n  },\n  fullScreenWrapper: {\n    position: \"relative\",\n    width: \"100vw\",\n    height: \"100vh\",\n    overflow: \"hidden\"\n  },\n  webcam: {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"cover\"\n  },\n  canvasOverlay: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    pointerEvents: \"none\"\n  },\n  bottomOverlay: {\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n    bottom: 0,\n    height: \"30vh\",\n    background: \"linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.2), transparent)\",\n    pointerEvents: \"none\"\n  },\n  // BIGGER KEYBOARD\n  keyboardWrapper: {\n    position: \"absolute\",\n    left: \"50%\",\n    bottom: \"2rem\",\n    transform: \"translateX(-50%)\",\n    width: \"95%\",\n    maxWidth: \"1200px\",\n    padding: \"18px\",\n    borderRadius: \"22px\",\n    background: \"rgba(15,23,42,0.95)\",\n    boxShadow: \"0 10px 30px rgba(0,0,0,0.65)\"\n  },\n  keyboardRow: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    gap: \"10px\",\n    marginBottom: \"12px\",\n    flexWrap: \"wrap\"\n  },\n  key: {\n    flex: 1,\n    minWidth: 55,\n    maxWidth: 90,\n    padding: \"16px 10px\",\n    background: \"#e5e7eb\",\n    borderRadius: \"12px\",\n    textAlign: \"center\",\n    fontWeight: 700,\n    fontSize: \"20px\",\n    cursor: \"pointer\",\n    userSelect: \"none\",\n    color: \"#111827\",\n    transition: \"transform 0.1s ease, background-color 0.1s ease, color 0.1s ease\"\n  },\n  // Questions panel\n  questionsPanel: {\n    position: \"absolute\",\n    top: \"1.25rem\",\n    right: \"1.25rem\",\n    width: \"320px\",\n    maxHeight: \"75vh\",\n    padding: \"12px\",\n    borderRadius: \"16px\",\n    background: \"rgba(255,255,255,0.96)\",\n    color: \"#111827\",\n    boxShadow: \"0 8px 25px rgba(0,0,0,0.5)\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  questionsScroll: {\n    marginTop: \"6px\",\n    overflowY: \"auto\",\n    paddingRight: \"4px\"\n  },\n  questionCard: {\n    marginBottom: \"8px\",\n    padding: \"6px\",\n    borderRadius: \"8px\",\n    background: \"#f9fafb\",\n    border: \"1px solid #e5e7eb\"\n  },\n  questionText: {\n    marginBottom: \"4px\",\n    fontSize: \"14px\"\n  },\n  textarea: {\n    width: \"100%\",\n    minHeight: \"55px\",\n    borderRadius: \"6px\",\n    border: \"1px solid #d1d5db\",\n    padding: \"6px\",\n    resize: \"vertical\",\n    fontSize: \"13px\"\n  },\n  submitBtn: {\n    marginTop: \"6px\",\n    padding: \"8px 12px\",\n    background: \"#16a34a\",\n    color: \"white\",\n    borderRadius: \"8px\",\n    border: \"none\",\n    cursor: \"pointer\",\n    alignSelf: \"flex-end\",\n    fontSize: \"14px\"\n  },\n  activeHint: {\n    fontSize: \"11px\",\n    color: \"#2563eb\",\n    marginTop: \"3px\"\n  },\n  errorBanner: {\n    position: \"absolute\",\n    top: 8,\n    left: \"50%\",\n    transform: \"translateX(-50%)\",\n    background: \"rgba(239,68,68,0.9)\",\n    padding: \"6px 12px\",\n    borderRadius: \"999px\",\n    zIndex: 40,\n    fontSize: \"13px\"\n  },\n  statusBanner: {\n    position: \"absolute\",\n    top: 8,\n    left: \"50%\",\n    transform: \"translateX(-50%)\",\n    background: \"rgba(22,163,74,0.9)\",\n    padding: \"6px 12px\",\n    borderRadius: \"999px\",\n    zIndex: 40,\n    fontSize: \"13px\"\n  },\n  gestureInfoBanner: {\n    position: \"absolute\",\n    bottom: 8,\n    left: 8,\n    padding: \"6px 10px\",\n    background: \"rgba(15,23,42,0.8)\",\n    borderRadius: \"999px\",\n    fontSize: \"12px\",\n    zIndex: 40\n  },\n  panelTitle: {\n    fontSize: \"16px\",\n    fontWeight: 600,\n    marginBottom: \"2px\"\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"Exam\");","map":{"version":3,"names":["React","useEffect","useRef","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Exam","_s","questions","setQuestions","answers","setAnswers","activeQuestion","setActiveQuestion","loading","setLoading","status","setStatus","error","setError","gestureInfo","setGestureInfo","videoRef","canvasRef","fetchQuestions","res","get","data","err","console","handleAnswerChange","index","value","prev","handleFocusQuestion","keyboardRows","typeOnActive","key","qKey","current","slice","handleSubmit","length","score","forEach","q","idx","userAns","trim","toLowerCase","correct","answer","rollNumber","localStorage","getItem","name","payload","post","success","video","canvas","ctx","getContext","stream","hands","rafId","hoverStart","hoverKeyEl","lastSelectTime","loadScript","src","Promise","resolve","reject","document","querySelector","s","createElement","async","onload","onerror","e","Error","body","appendChild","setup","navigator","mediaDevices","getUserMedia","width","height","audio","srcObject","play","videoWidth","videoHeight","window","Hands","locateFile","file","setOptions","maxNumHands","modelComplexity","minDetectionConfidence","minTrackingConfidence","onResults","loop","readyState","send","image","requestAnimationFrame","message","results","clearRect","multiHandLandmarks","landmarks","drawConnectors","drawLandmarks","HAND_CONNECTIONS","color","lineWidth","indexTip","thumbTip","canvasX","x","canvasY","y","fillStyle","beginPath","arc","Math","PI","fill","videoRect","getBoundingClientRect","pageX","left","pageY","top","keyElems","Array","from","querySelectorAll","currentlyHovered","el","rect","right","bottom","style","backgroundColor","transform","now","Date","dx","dy","dist","sqrt","PINCH_THRESHOLD","COOLDOWN","keyVal","dataset","innerText","opacity","setTimeout","cancelAnimationFrame","close","getTracks","t","stop","styles","page","children","errorBanner","fileName","_jsxFileName","lineNumber","columnNumber","statusBanner","gestureInfoBanner","fullScreenWrapper","ref","autoPlay","muted","playsInline","webcam","canvasOverlay","bottomOverlay","id","keyboardWrapper","map","row","rIndex","keyboardRow","split","ch","i","className","onClick","flex","fontSize","questionsPanel","panelTitle","questionsScroll","questionCard","questionText","question","textarea","placeholder","onChange","target","onFocus","activeHint","submitBtn","_c","background","minHeight","margin","padding","position","fontFamily","overflow","objectFit","pointerEvents","maxWidth","borderRadius","boxShadow","display","justifyContent","gap","marginBottom","flexWrap","minWidth","textAlign","fontWeight","cursor","userSelect","transition","maxHeight","flexDirection","marginTop","overflowY","paddingRight","border","resize","alignSelf","zIndex","$RefreshReg$"],"sources":["C:/Users/dhany/Downloads/gesture-exam-projectgpt/frontend/src/pages/Exam.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Exam() {\r\n  const [questions, setQuestions] = useState([]);\r\n  const [answers, setAnswers] = useState({});\r\n  const [activeQuestion, setActiveQuestion] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [status, setStatus] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [gestureInfo, setGestureInfo] = useState(\"Gesture keyboard loading...\");\r\n\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  // -------- FETCH QUESTIONS --------\r\n  useEffect(() => {\r\n    async function fetchQuestions() {\r\n      try {\r\n        setLoading(true);\r\n        const res = await axios.get(\"http://localhost:5000/api/questions\");\r\n        setQuestions(res.data || []);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(\"Failed to load questions.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchQuestions();\r\n  }, []);\r\n\r\n  // -------- ANSWER HANDLING --------\r\n  function handleAnswerChange(index, value) {\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [\"Q\" + (index + 1)]: value,\r\n    }));\r\n  }\r\n\r\n  function handleFocusQuestion(index) {\r\n    setActiveQuestion(index);\r\n  }\r\n\r\n  // -------- VIRTUAL KEYBOARD --------\r\n  const keyboardRows = [\"QWERTYUIOP\", \"ASDFGHJKL\", \"ZXCVBNM\"];\r\n\r\n  function typeOnActive(key) {\r\n    if (activeQuestion === null) return;\r\n\r\n    const qKey = \"Q\" + (activeQuestion + 1);\r\n    const current = answers[qKey] || \"\";\r\n\r\n    if (key === \"SPACE\") {\r\n      handleAnswerChange(activeQuestion, current + \" \");\r\n    } else if (key === \"BACKSPACE\") {\r\n      handleAnswerChange(activeQuestion, current.slice(0, -1));\r\n    } else if (key === \"CLEAR\") {\r\n      handleAnswerChange(activeQuestion, \"\");\r\n    } else {\r\n      handleAnswerChange(activeQuestion, current + key);\r\n    }\r\n  }\r\n\r\n  // -------- SUBMIT EXAM --------\r\n  async function handleSubmit() {\r\n    try {\r\n      setStatus(\"\");\r\n      setError(\"\");\r\n\r\n      if (questions.length === 0) {\r\n        setError(\"No questions to submit.\");\r\n        return;\r\n      }\r\n\r\n      let score = 0;\r\n      questions.forEach((q, idx) => {\r\n        const key = \"Q\" + (idx + 1);\r\n        const userAns = (answers[key] || \"\").trim().toLowerCase();\r\n        const correct = (q.answer || \"\").trim().toLowerCase();\r\n        if (correct && userAns === correct) score++;\r\n      });\r\n\r\n      const rollNumber =\r\n        localStorage.getItem(\"studentRollNumber\") || \"Unknown Roll\";\r\n      const name = localStorage.getItem(\"studentName\") || \"Student\";\r\n\r\n      const payload = {\r\n        rollNumber,\r\n        name,\r\n        answers,\r\n        score,\r\n      };\r\n\r\n      const res = await axios.post(\r\n        \"http://localhost:5000/api/submit-exam\",\r\n        payload\r\n      );\r\n\r\n      if (res.data.success) {\r\n        setStatus(\r\n          `âœ… Exam submitted successfully! Score: ${score}/${questions.length}`\r\n        );\r\n      } else {\r\n        setError(\"Failed to submit exam.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Server error while submitting exam.\");\r\n    }\r\n  }\r\n\r\n  // -------- GESTURE KEYBOARD (MEDIAPIPE HANDS) --------\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    if (!video || !canvas) return;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    let stream;\r\n    let hands = null;\r\n    let rafId = null;\r\n    let hoverStart = null;\r\n    let hoverKeyEl = null;\r\n    let lastSelectTime = 0;\r\n\r\n    // helper: load external script\r\n    const loadScript = (src) =>\r\n      new Promise((resolve, reject) => {\r\n        if (document.querySelector(`script[src=\"${src}\"]`)) {\r\n          resolve();\r\n          return;\r\n        }\r\n        const s = document.createElement(\"script\");\r\n        s.src = src;\r\n        s.async = true;\r\n        s.onload = () => resolve();\r\n        s.onerror = (e) =>\r\n          reject(new Error(\"Failed to load script: \" + src));\r\n        document.body.appendChild(s);\r\n      });\r\n\r\n    async function setup() {\r\n      try {\r\n        setGestureInfo(\"Starting webcam...\");\r\n        // start webcam\r\n        stream = await navigator.mediaDevices.getUserMedia({\r\n          video: { width: 1280, height: 720 },\r\n          audio: false,\r\n        });\r\n        video.srcObject = stream;\r\n        await video.play();\r\n\r\n        // match canvas size to video\r\n        canvas.width = video.videoWidth || 1280;\r\n        canvas.height = video.videoHeight || 720;\r\n\r\n        setGestureInfo(\"Loading hand tracking...\");\r\n\r\n        // load mediapipe scripts\r\n        await loadScript(\r\n          \"https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.3/drawing_utils.js\"\r\n        );\r\n        await loadScript(\r\n          \"https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4/hands.js\"\r\n        );\r\n\r\n        if (!window.Hands) {\r\n          throw new Error(\"MediaPipe Hands not available on window\");\r\n        }\r\n\r\n        hands = new window.Hands({\r\n          locateFile: (file) =>\r\n            `https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4/${file}`,\r\n        });\r\n\r\n        hands.setOptions({\r\n          maxNumHands: 1,\r\n          modelComplexity: 1,\r\n          minDetectionConfidence: 0.7,\r\n          minTrackingConfidence: 0.6,\r\n        });\r\n\r\n        hands.onResults(onResults);\r\n\r\n        setGestureInfo(\r\n          \"âœ… Gesture keyboard ready: move index finger over keys and pinch to type.\"\r\n        );\r\n\r\n        // processing loop\r\n        const loop = async () => {\r\n          if (video.readyState >= 2 && hands) {\r\n            await hands.send({ image: video });\r\n          }\r\n          rafId = requestAnimationFrame(loop);\r\n        };\r\n        loop();\r\n      } catch (err) {\r\n        console.error(err);\r\n        setGestureInfo(\"âš ï¸ Gesture keyboard disabled: \" + err.message);\r\n      }\r\n    }\r\n\r\n    function onResults(results) {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      if (!results.multiHandLandmarks || results.multiHandLandmarks.length === 0)\r\n        return;\r\n\r\n      const landmarks = results.multiHandLandmarks[0];\r\n\r\n      // draw landmarks (if drawing utils loaded)\r\n      if (window.drawConnectors && window.drawLandmarks && window.Hands) {\r\n        try {\r\n          window.drawConnectors(\r\n            ctx,\r\n            landmarks,\r\n            window.Hands.HAND_CONNECTIONS,\r\n            { color: \"#00FF00\", lineWidth: 3 }\r\n          );\r\n          window.drawLandmarks(ctx, landmarks, {\r\n            color: \"#FF0000\",\r\n            lineWidth: 1,\r\n          });\r\n        } catch (e) {\r\n          // ignore drawing errors\r\n        }\r\n      }\r\n\r\n      // index finger tip in video space\r\n      const indexTip = landmarks[8];\r\n      const thumbTip = landmarks[4];\r\n\r\n      const canvasX = indexTip.x * canvas.width;\r\n      const canvasY = indexTip.y * canvas.height;\r\n\r\n      // draw pointer circle\r\n      ctx.fillStyle = \"rgba(0, 123, 255, 0.9)\";\r\n      ctx.beginPath();\r\n      ctx.arc(canvasX, canvasY, 10, 0, Math.PI * 2);\r\n      ctx.fill();\r\n\r\n      // map to page coords to hit test keyboard keys\r\n      const videoRect = video.getBoundingClientRect();\r\n      const pageX = videoRect.left + indexTip.x * videoRect.width;\r\n      const pageY = videoRect.top + indexTip.y * videoRect.height;\r\n\r\n      // find hovered key\r\n      const keyElems = Array.from(\r\n        document.querySelectorAll(\".gesture-key\")\r\n      );\r\n      let currentlyHovered = null;\r\n\r\n      keyElems.forEach((el) => {\r\n        const rect = el.getBoundingClientRect();\r\n        if (\r\n          pageX >= rect.left &&\r\n          pageX <= rect.right &&\r\n          pageY >= rect.top &&\r\n          pageY <= rect.bottom\r\n        ) {\r\n          currentlyHovered = el;\r\n          el.style.backgroundColor = \"#3b82f6\";\r\n          el.style.color = \"#ffffff\";\r\n          el.style.transform = \"scale(1.08)\";\r\n        } else {\r\n          el.style.backgroundColor = \"#e5e7eb\";\r\n          el.style.color = \"#111827\";\r\n          el.style.transform = \"scale(1.0)\";\r\n        }\r\n      });\r\n\r\n      // dwell/pinch logic\r\n      const now = Date.now();\r\n\r\n      // measure distance between thumb and index tip\r\n      const dx = thumbTip.x - indexTip.x;\r\n      const dy = thumbTip.y - indexTip.y;\r\n      const dist = Math.sqrt(dx * dx + dy * dy); // 0..1 (normalized)\r\n\r\n      const PINCH_THRESHOLD = 0.05; // smaller = closer pinch\r\n      const COOLDOWN = 600; // ms\r\n\r\n      if (currentlyHovered) {\r\n        if (hoverKeyEl !== currentlyHovered) {\r\n          // new key hovered\r\n          hoverKeyEl = currentlyHovered;\r\n          hoverStart = now;\r\n        }\r\n\r\n        // detect pinch + cooldown\r\n        if (dist < PINCH_THRESHOLD && now - lastSelectTime > COOLDOWN) {\r\n          const keyVal =\r\n            hoverKeyEl.dataset.key || hoverKeyEl.innerText.trim();\r\n          typeOnActive(keyVal);\r\n          lastSelectTime = now;\r\n\r\n          // small flash effect\r\n          hoverKeyEl.style.opacity = \"0.7\";\r\n          setTimeout(() => {\r\n            if (hoverKeyEl) hoverKeyEl.style.opacity = \"1\";\r\n          }, 150);\r\n        }\r\n      } else {\r\n        hoverKeyEl = null;\r\n        hoverStart = null;\r\n      }\r\n    }\r\n\r\n    setup();\r\n\r\n    // cleanup\r\n    return () => {\r\n      if (rafId) cancelAnimationFrame(rafId);\r\n      if (hands && hands.close) hands.close();\r\n      if (stream) {\r\n        stream.getTracks().forEach((t) => t.stop());\r\n      }\r\n    };\r\n  }, [answers, activeQuestion]); // deps just to rebind typeOnActive correctly\r\n\r\n  // -------- RENDER --------\r\n  return (\r\n    <div style={styles.page}>\r\n      {error && <p style={styles.errorBanner}>{error}</p>}\r\n      {status && !error && <p style={styles.statusBanner}>{status}</p>}\r\n\r\n      {/* Gesture helper text */}\r\n      {gestureInfo && (\r\n        <div style={styles.gestureInfoBanner}>{gestureInfo}</div>\r\n      )}\r\n\r\n      <div style={styles.fullScreenWrapper}>\r\n        {/* Big Webcam */}\r\n        <video\r\n          ref={videoRef}\r\n          autoPlay\r\n          muted\r\n          playsInline\r\n          style={styles.webcam}\r\n        />\r\n\r\n        {/* Canvas overlay for hand drawing + pointer */}\r\n        <canvas ref={canvasRef} style={styles.canvasOverlay} />\r\n\r\n        {/* Dark gradient overlay at bottom (for keyboard contrast) */}\r\n        <div style={styles.bottomOverlay} />\r\n\r\n        {/* Virtual Keyboard overlay at bottom */}\r\n        <div id=\"gesture-keyboard\" style={styles.keyboardWrapper}>\r\n          {keyboardRows.map((row, rIndex) => (\r\n            <div key={rIndex} style={styles.keyboardRow}>\r\n              {row.split(\"\").map((ch, i) => (\r\n                <div\r\n                  key={i}\r\n                  className=\"gesture-key\"\r\n                  data-key={ch}\r\n                  style={styles.key}\r\n                  onClick={() => typeOnActive(ch)}\r\n                >\r\n                  {ch}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ))}\r\n\r\n          {/* Special keys row */}\r\n          <div style={styles.keyboardRow}>\r\n            <div\r\n              className=\"gesture-key\"\r\n              data-key=\"SPACE\"\r\n              style={{ ...styles.key, flex: 3.5, fontSize: \"22px\" }}\r\n              onClick={() => typeOnActive(\"SPACE\")}\r\n            >\r\n              SPACE\r\n            </div>\r\n            <div\r\n              className=\"gesture-key\"\r\n              data-key=\"BACKSPACE\"\r\n              style={{ ...styles.key, flex: 1.5, fontSize: \"22px\" }}\r\n              onClick={() => typeOnActive(\"BACKSPACE\")}\r\n            >\r\n              âŒ«\r\n            </div>\r\n            <div\r\n              className=\"gesture-key\"\r\n              data-key=\"CLEAR\"\r\n              style={{ ...styles.key, flex: 1.5, fontSize: \"20px\" }}\r\n              onClick={() => typeOnActive(\"CLEAR\")}\r\n            >\r\n              CLEAR\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Questions panel in corner */}\r\n        <div style={styles.questionsPanel}>\r\n          {loading && <p>Loading questions...</p>}\r\n\r\n          {!loading && questions.length === 0 && (\r\n            <p>No questions available. Contact admin.</p>\r\n          )}\r\n\r\n          {!loading && questions.length > 0 && (\r\n            <>\r\n              <h3 style={styles.panelTitle}>Questions</h3>\r\n              <div style={styles.questionsScroll}>\r\n                {questions.map((q, idx) => (\r\n                  <div key={idx} style={styles.questionCard}>\r\n                    <p style={styles.questionText}>\r\n                      <b>Q{idx + 1}:</b> {q.question || q.q || \"Question\"}\r\n                    </p>\r\n                    <textarea\r\n                      style={styles.textarea}\r\n                      placeholder=\"Type your answer here...\"\r\n                      value={answers[\"Q\" + (idx + 1)] || \"\"}\r\n                      onChange={(e) =>\r\n                        handleAnswerChange(idx, e.target.value)\r\n                      }\r\n                      onFocus={() => handleFocusQuestion(idx)}\r\n                    />\r\n                    {activeQuestion === idx && (\r\n                      <p style={styles.activeHint}>\r\n                        ðŸ”µ Keyboard / gestures typing here\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <button style={styles.submitBtn} onClick={handleSubmit}>\r\n                Submit Exam\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  page: {\r\n    background: \"#000\",\r\n    minHeight: \"100vh\",\r\n    margin: 0,\r\n    padding: 0,\r\n    position: \"relative\",\r\n    color: \"#fff\",\r\n    fontFamily: \"sans-serif\",\r\n  },\r\n  fullScreenWrapper: {\r\n    position: \"relative\",\r\n    width: \"100vw\",\r\n    height: \"100vh\",\r\n    overflow: \"hidden\",\r\n  },\r\n  webcam: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    objectFit: \"cover\",\r\n  },\r\n  canvasOverlay: {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: 0,\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    pointerEvents: \"none\",\r\n  },\r\n  bottomOverlay: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    height: \"30vh\",\r\n    background:\r\n      \"linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.2), transparent)\",\r\n    pointerEvents: \"none\",\r\n  },\r\n\r\n  // BIGGER KEYBOARD\r\n  keyboardWrapper: {\r\n    position: \"absolute\",\r\n    left: \"50%\",\r\n    bottom: \"2rem\",\r\n    transform: \"translateX(-50%)\",\r\n    width: \"95%\",\r\n    maxWidth: \"1200px\",\r\n    padding: \"18px\",\r\n    borderRadius: \"22px\",\r\n    background: \"rgba(15,23,42,0.95)\",\r\n    boxShadow: \"0 10px 30px rgba(0,0,0,0.65)\",\r\n  },\r\n  keyboardRow: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    gap: \"10px\",\r\n    marginBottom: \"12px\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  key: {\r\n    flex: 1,\r\n    minWidth: 55,\r\n    maxWidth: 90,\r\n    padding: \"16px 10px\",\r\n    background: \"#e5e7eb\",\r\n    borderRadius: \"12px\",\r\n    textAlign: \"center\",\r\n    fontWeight: 700,\r\n    fontSize: \"20px\",\r\n    cursor: \"pointer\",\r\n    userSelect: \"none\",\r\n    color: \"#111827\",\r\n    transition: \"transform 0.1s ease, background-color 0.1s ease, color 0.1s ease\",\r\n  },\r\n\r\n  // Questions panel\r\n  questionsPanel: {\r\n    position: \"absolute\",\r\n    top: \"1.25rem\",\r\n    right: \"1.25rem\",\r\n    width: \"320px\",\r\n    maxHeight: \"75vh\",\r\n    padding: \"12px\",\r\n    borderRadius: \"16px\",\r\n    background: \"rgba(255,255,255,0.96)\",\r\n    color: \"#111827\",\r\n    boxShadow: \"0 8px 25px rgba(0,0,0,0.5)\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n  questionsScroll: {\r\n    marginTop: \"6px\",\r\n    overflowY: \"auto\",\r\n    paddingRight: \"4px\",\r\n  },\r\n  questionCard: {\r\n    marginBottom: \"8px\",\r\n    padding: \"6px\",\r\n    borderRadius: \"8px\",\r\n    background: \"#f9fafb\",\r\n    border: \"1px solid #e5e7eb\",\r\n  },\r\n  questionText: {\r\n    marginBottom: \"4px\",\r\n    fontSize: \"14px\",\r\n  },\r\n  textarea: {\r\n    width: \"100%\",\r\n    minHeight: \"55px\",\r\n    borderRadius: \"6px\",\r\n    border: \"1px solid #d1d5db\",\r\n    padding: \"6px\",\r\n    resize: \"vertical\",\r\n    fontSize: \"13px\",\r\n  },\r\n  submitBtn: {\r\n    marginTop: \"6px\",\r\n    padding: \"8px 12px\",\r\n    background: \"#16a34a\",\r\n    color: \"white\",\r\n    borderRadius: \"8px\",\r\n    border: \"none\",\r\n    cursor: \"pointer\",\r\n    alignSelf: \"flex-end\",\r\n    fontSize: \"14px\",\r\n  },\r\n  activeHint: {\r\n    fontSize: \"11px\",\r\n    color: \"#2563eb\",\r\n    marginTop: \"3px\",\r\n  },\r\n  errorBanner: {\r\n    position: \"absolute\",\r\n    top: 8,\r\n    left: \"50%\",\r\n    transform: \"translateX(-50%)\",\r\n    background: \"rgba(239,68,68,0.9)\",\r\n    padding: \"6px 12px\",\r\n    borderRadius: \"999px\",\r\n    zIndex: 40,\r\n    fontSize: \"13px\",\r\n  },\r\n  statusBanner: {\r\n    position: \"absolute\",\r\n    top: 8,\r\n    left: \"50%\",\r\n    transform: \"translateX(-50%)\",\r\n    background: \"rgba(22,163,74,0.9)\",\r\n    padding: \"6px 12px\",\r\n    borderRadius: \"999px\",\r\n    zIndex: 40,\r\n    fontSize: \"13px\",\r\n  },\r\n  gestureInfoBanner: {\r\n    position: \"absolute\",\r\n    bottom: 8,\r\n    left: 8,\r\n    padding: \"6px 10px\",\r\n    background: \"rgba(15,23,42,0.8)\",\r\n    borderRadius: \"999px\",\r\n    fontSize: \"12px\",\r\n    zIndex: 40,\r\n  },\r\n  panelTitle: {\r\n    fontSize: \"16px\",\r\n    fontWeight: 600,\r\n    marginBottom: \"2px\",\r\n  },\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}