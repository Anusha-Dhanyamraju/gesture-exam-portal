{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dhany\\\\Downloads\\\\gesture-exam-projectgpt\\\\frontend\\\\src\\\\pages\\\\Exam.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Exam() {\n  _s();\n  const [questions, setQuestions] = useState([]);\n  const [answers, setAnswers] = useState({});\n  const [activeQuestion, setActiveQuestion] = useState(null);\n  const activeQuestionRef = useRef(null); // always holds latest active question\n  const [loading, setLoading] = useState(true);\n  const [status, setStatus] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [gestureInfo, setGestureInfo] = useState(\"Gesture keyboard loading...\");\n\n  // ‚è±Ô∏è TIMER: 30 minutes = 1800 seconds\n  const [timeLeft, setTimeLeft] = useState(30 * 60);\n  const submittedRef = useRef(false); // to avoid double-submit\n\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // ---------------- FETCH QUESTIONS ----------------\n  useEffect(() => {\n    async function fetchQuestions() {\n      try {\n        setLoading(true);\n        const res = await axios.get(\"http://localhost:5000/api/questions\");\n        setQuestions(res.data || []);\n      } catch (err) {\n        console.error(err);\n        setError(\"Failed to load questions.\");\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchQuestions();\n  }, []);\n\n  // ---------------- ANSWER HANDLING ----------------\n  function handleAnswerChange(index, value) {\n    setAnswers(prev => ({\n      ...prev,\n      [\"Q\" + (index + 1)]: value\n    }));\n  }\n  function handleFocusQuestion(index) {\n    setActiveQuestion(index);\n    activeQuestionRef.current = index;\n  }\n\n  // ---------------- VIRTUAL KEYBOARD ----------------\n  const keyboardRows = [\"QWERTYUIOP\", \"ASDFGHJKL\", \"ZXCVBNM\"];\n\n  // uses ref + functional update so it always sees latest state\n  function typeOnActive(key) {\n    const index = activeQuestionRef.current;\n    if (index === null || index === undefined) return;\n    const qKey = \"Q\" + (index + 1);\n    setAnswers(prev => {\n      const current = prev[qKey] || \"\";\n      let next = current;\n      if (key === \"SPACE\") {\n        next = current + \" \";\n      } else if (key === \"BACKSPACE\") {\n        next = current.slice(0, -1);\n      } else if (key === \"CLEAR\") {\n        next = \"\";\n      } else {\n        next = current + key;\n      }\n      return {\n        ...prev,\n        [qKey]: next\n      };\n    });\n  }\n\n  // helper to format time as mm:ss\n  function formatTime(sec) {\n    const m = Math.floor(sec / 60);\n    const s = sec % 60;\n    return `${m.toString().padStart(2, \"0\")}:${s.toString().padStart(2, \"0\")}`;\n  }\n\n  // ---------------- SUBMIT EXAM ----------------\n  async function handleSubmit(auto = false) {\n    try {\n      // prevent double-submit\n      if (submittedRef.current) return;\n      submittedRef.current = true;\n      setStatus(\"\");\n      setError(\"\");\n      if (questions.length === 0) {\n        setError(\"No questions to submit.\");\n        return;\n      }\n      let score = 0;\n      questions.forEach((q, idx) => {\n        const key = \"Q\" + (idx + 1);\n        const userAns = (answers[key] || \"\").trim().toLowerCase();\n        const correct = (q.answer || \"\").trim().toLowerCase();\n        if (correct && userAns === correct) score++;\n      });\n      const rollNumber = localStorage.getItem(\"studentRollNumber\") || \"Unknown Roll\";\n      const name = localStorage.getItem(\"studentName\") || \"Student\";\n      const payload = {\n        rollNumber,\n        name,\n        answers,\n        score\n      };\n      const res = await axios.post(\"http://localhost:5000/api/submit-exam\", payload);\n      if (res.data.success) {\n        if (auto) {\n          setStatus(`‚è≥ Time over. Exam auto-submitted. Score: ${score}/${questions.length}`);\n        } else {\n          setStatus(`‚úÖ Exam submitted successfully! Score: ${score}/${questions.length}`);\n        }\n      } else {\n        setError(\"Failed to submit exam.\");\n      }\n    } catch (err) {\n      console.error(err);\n      setError(\"Server error while submitting exam.\");\n    }\n  }\n\n  // ---------------- TIMER LOGIC (AUTO SUBMIT) ----------------\n  useEffect(() => {\n    // if already submitted, stop timer\n    if (submittedRef.current) return;\n    if (timeLeft <= 0) {\n      // time over ‚Üí auto submit\n      handleSubmit(true);\n      return;\n    }\n    const id = setTimeout(() => {\n      setTimeLeft(prev => prev - 1);\n    }, 1000);\n    return () => clearTimeout(id);\n  }, [timeLeft]); // runs every second\n\n  // ---------------- GESTURE KEYBOARD (WEBCAM + MEDIAPIPE HANDS) ----------------\n  useEffect(() => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    if (!video || !canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    let stream = null;\n    let hands = null;\n    let rafId = null;\n    let hoverKeyEl = null;\n    let lastSelectTime = 0;\n\n    // helper to load external script\n    const loadScript = src => new Promise((resolve, reject) => {\n      if (document.querySelector(`script[src=\"${src}\"]`)) {\n        resolve();\n        return;\n      }\n      const s = document.createElement(\"script\");\n      s.src = src;\n      s.async = true;\n      s.onload = () => resolve();\n      s.onerror = () => reject(new Error(\"Failed to load script: \" + src));\n      document.body.appendChild(s);\n    });\n    async function setup() {\n      try {\n        setGestureInfo(\"Starting webcam...\");\n\n        // start webcam\n        stream = await navigator.mediaDevices.getUserMedia({\n          video: {\n            width: 1280,\n            height: 720\n          },\n          audio: false\n        });\n        video.srcObject = stream;\n        await video.play();\n\n        // set canvas size to match video\n        canvas.width = video.videoWidth || 1280;\n        canvas.height = video.videoHeight || 720;\n        setGestureInfo(\"Loading hand tracking...\");\n\n        // ‚úÖ UPDATED URLs (no version numbers)\n        await loadScript(\"https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js\");\n        await loadScript(\"https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js\");\n\n        // find correct constructor\n        let HandsCtor = window.Hands && window.Hands.Hands || window.Hands || null;\n        if (!HandsCtor) {\n          console.warn(\"window.Hands contents:\", window.Hands);\n          throw new Error(\"MediaPipe Hands class not found. CDN might have changed.\");\n        }\n        hands = new HandsCtor({\n          locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`\n        });\n        hands.setOptions({\n          maxNumHands: 1,\n          modelComplexity: 1,\n          minDetectionConfidence: 0.7,\n          minTrackingConfidence: 0.6\n        });\n        hands.onResults(onResults);\n        setGestureInfo(\"‚úÖ Gesture keyboard ready ‚Äì focus a question, move your index finger over keys and pinch to type.\");\n\n        // main loop\n        const loop = async () => {\n          if (video.readyState >= 2 && hands) {\n            await hands.send({\n              image: video\n            });\n          }\n          rafId = requestAnimationFrame(loop);\n        };\n        loop();\n      } catch (err) {\n        console.error(err);\n        setGestureInfo(\"‚ö†Ô∏è Gesture keyboard disabled: \" + err.message);\n      }\n    }\n    function onResults(results) {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      if (!results.multiHandLandmarks || results.multiHandLandmarks.length === 0) return;\n      const landmarks = results.multiHandLandmarks[0];\n\n      // draw landmarks if helpers exist\n      const HAND_CONNECTIONS = window.Hands && window.Hands.HAND_CONNECTIONS || window.HAND_CONNECTIONS;\n      if (window.drawConnectors && window.drawLandmarks && HAND_CONNECTIONS) {\n        try {\n          window.drawConnectors(ctx, landmarks, HAND_CONNECTIONS, {\n            color: \"#00FF00\",\n            lineWidth: 3\n          });\n          window.drawLandmarks(ctx, landmarks, {\n            color: \"#FF0000\",\n            lineWidth: 1\n          });\n        } catch (e) {\n          // ignore drawing errors\n        }\n      }\n      const indexTip = landmarks[8];\n      const thumbTip = landmarks[4];\n      const canvasX = indexTip.x * canvas.width;\n      const canvasY = indexTip.y * canvas.height;\n\n      // draw pointer\n      ctx.fillStyle = \"rgba(0, 123, 255, 0.9)\";\n      ctx.beginPath();\n      ctx.arc(canvasX, canvasY, 10, 0, Math.PI * 2);\n      ctx.fill();\n\n      // convert to page coordinates to hit-test DOM keys\n      const videoRect = video.getBoundingClientRect();\n      const pageX = videoRect.left + indexTip.x * videoRect.width;\n      const pageY = videoRect.top + indexTip.y * videoRect.height;\n      const keyElems = Array.from(document.querySelectorAll(\".gesture-key\"));\n      let currentlyHovered = null;\n      keyElems.forEach(el => {\n        const rect = el.getBoundingClientRect();\n        if (pageX >= rect.left && pageX <= rect.right && pageY >= rect.top && pageY <= rect.bottom) {\n          currentlyHovered = el;\n          el.style.backgroundColor = \"#3b82f6\";\n          el.style.color = \"#ffffff\";\n          el.style.transform = \"scale(1.08)\";\n        } else {\n          el.style.backgroundColor = \"#e5e7eb\";\n          el.style.color = \"#111827\";\n          el.style.transform = \"scale(1.0)\";\n        }\n      });\n      const now = Date.now();\n\n      // distance between thumb & index = pinch\n      const dx = thumbTip.x - indexTip.x;\n      const dy = thumbTip.y - indexTip.y;\n      const dist = Math.sqrt(dx * dx + dy * dy);\n      const PINCH_THRESHOLD = 0.05;\n      const COOLDOWN = 600; // ms\n\n      if (currentlyHovered) {\n        if (dist < PINCH_THRESHOLD && now - lastSelectTime > COOLDOWN) {\n          const keyVal = currentlyHovered.dataset.key || currentlyHovered.innerText.trim();\n          typeOnActive(keyVal);\n          lastSelectTime = now;\n\n          // flash effect\n          currentlyHovered.style.opacity = \"0.7\";\n          setTimeout(() => {\n            if (currentlyHovered) currentlyHovered.style.opacity = \"1\";\n          }, 150);\n        }\n      }\n    }\n    setup();\n\n    // cleanup\n    return () => {\n      if (rafId) cancelAnimationFrame(rafId);\n      if (hands && hands.close) hands.close();\n      if (stream) {\n        stream.getTracks().forEach(t => t.stop());\n      }\n    };\n  }, []); // run once, uses refs + functional setState so it's safe\n\n  // ---------------- RENDER ----------------\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.page,\n    children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.errorBanner,\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 17\n    }, this), status && !error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.statusBanner,\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 28\n    }, this), gestureInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.gestureInfoBanner,\n      children: gestureInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.timerBadge,\n      children: [\"\\u23F3 Time Left: \", formatTime(timeLeft)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.fullScreenWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        muted: true,\n        playsInline: true,\n        style: styles.webcam\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: styles.canvasOverlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.bottomOverlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"gesture-keyboard\",\n        style: styles.keyboardWrapper,\n        children: [keyboardRows.map((row, rIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.keyboardRow,\n          children: row.split(\"\").map((ch, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gesture-key\",\n            \"data-key\": ch,\n            style: styles.key,\n            onClick: () => typeOnActive(ch),\n            children: ch\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 17\n          }, this))\n        }, rIndex, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.keyboardRow,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gesture-key\",\n            \"data-key\": \"SPACE\",\n            style: {\n              ...styles.key,\n              flex: 3.5,\n              fontSize: \"22px\"\n            },\n            onClick: () => typeOnActive(\"SPACE\"),\n            children: \"SPACE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gesture-key\",\n            \"data-key\": \"BACKSPACE\",\n            style: {\n              ...styles.key,\n              flex: 1.5,\n              fontSize: \"22px\"\n            },\n            onClick: () => typeOnActive(\"BACKSPACE\"),\n            children: \"\\u232B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gesture-key\",\n            \"data-key\": \"CLEAR\",\n            style: {\n              ...styles.key,\n              flex: 1.5,\n              fontSize: \"20px\"\n            },\n            onClick: () => typeOnActive(\"CLEAR\"),\n            children: \"CLEAR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.questionsPanel,\n        children: [loading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading questions...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 23\n        }, this), !loading && questions.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No questions available. Contact admin.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 13\n        }, this), !loading && questions.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: styles.panelTitle,\n            children: \"Questions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.questionsScroll,\n            children: questions.map((q, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.questionCard,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: styles.questionText,\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: [\"Q\", idx + 1, \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 23\n                }, this), \" \", q.question || q.q || \"Question\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                style: styles.textarea,\n                placeholder: \"Type your answer here...\",\n                value: answers[\"Q\" + (idx + 1)] || \"\",\n                onChange: e => handleAnswerChange(idx, e.target.value),\n                onFocus: () => handleFocusQuestion(idx)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 21\n              }, this), activeQuestion === idx && /*#__PURE__*/_jsxDEV(\"p\", {\n                style: styles.activeHint,\n                children: \"\\uD83D\\uDD35 Keyboard / gestures typing here\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 23\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.submitBtn,\n            onClick: () => handleSubmit(false),\n            children: \"Submit Exam\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 374,\n    columnNumber: 5\n  }, this);\n}\n_s(Exam, \"r3wLeyAfGZP8juTcnElNCz2Qs+E=\");\n_c = Exam;\nconst styles = {\n  page: {\n    background: \"#000\",\n    minHeight: \"100vh\",\n    margin: 0,\n    padding: 0,\n    position: \"relative\",\n    color: \"#fff\",\n    fontFamily: \"sans-serif\"\n  },\n  fullScreenWrapper: {\n    position: \"relative\",\n    width: \"100vw\",\n    height: \"100vh\",\n    overflow: \"hidden\"\n  },\n  webcam: {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"cover\"\n  },\n  canvasOverlay: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    pointerEvents: \"none\"\n  },\n  bottomOverlay: {\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n    bottom: 0,\n    height: \"30vh\",\n    background: \"linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.2), transparent)\",\n    pointerEvents: \"none\"\n  },\n  // BIGGER KEYBOARD\n  keyboardWrapper: {\n    position: \"absolute\",\n    left: \"50%\",\n    bottom: \"2rem\",\n    transform: \"translateX(-50%)\",\n    width: \"95%\",\n    maxWidth: \"1200px\",\n    padding: \"18px\",\n    borderRadius: \"22px\",\n    background: \"rgba(15,23,42,0.95)\",\n    boxShadow: \"0 10px 30px rgba(0,0,0,0.65)\"\n  },\n  keyboardRow: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    gap: \"10px\",\n    marginBottom: \"12px\",\n    flexWrap: \"wrap\"\n  },\n  key: {\n    flex: 1,\n    minWidth: 55,\n    maxWidth: 90,\n    padding: \"16px 10px\",\n    background: \"#e5e7eb\",\n    borderRadius: \"12px\",\n    textAlign: \"center\",\n    fontWeight: 700,\n    fontSize: \"20px\",\n    cursor: \"pointer\",\n    userSelect: \"none\",\n    color: \"#111827\",\n    transition: \"transform 0.1s ease, background-color 0.1s ease, color 0.1s ease, opacity 0.1s ease\"\n  },\n  // Questions panel\n  questionsPanel: {\n    position: \"absolute\",\n    top: \"1.25rem\",\n    right: \"1.25rem\",\n    width: \"320px\",\n    maxHeight: \"75vh\",\n    padding: \"12px\",\n    borderRadius: \"16px\",\n    background: \"rgba(255,255,255,0.96)\",\n    color: \"#111827\",\n    boxShadow: \"0 8px 25px rgba(0,0,0,0.5)\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  questionsScroll: {\n    marginTop: \"6px\",\n    overflowY: \"auto\",\n    paddingRight: \"4px\"\n  },\n  questionCard: {\n    marginBottom: \"8px\",\n    padding: \"6px\",\n    borderRadius: \"8px\",\n    background: \"#f9fafb\",\n    border: \"1px solid #e5e7eb\"\n  },\n  questionText: {\n    marginBottom: \"4px\",\n    fontSize: \"14px\"\n  },\n  textarea: {\n    width: \"100%\",\n    minHeight: \"55px\",\n    borderRadius: \"6px\",\n    border: \"1px solid #d1d5db\",\n    padding: \"6px\",\n    resize: \"vertical\",\n    fontSize: \"13px\"\n  },\n  submitBtn: {\n    marginTop: \"6px\",\n    padding: \"8px 12px\",\n    background: \"#16a34a\",\n    color: \"white\",\n    borderRadius: \"8px\",\n    border: \"none\",\n    cursor: \"pointer\",\n    alignSelf: \"flex-end\",\n    fontSize: \"14px\"\n  },\n  activeHint: {\n    fontSize: \"11px\",\n    color: \"#2563eb\",\n    marginTop: \"3px\"\n  },\n  errorBanner: {\n    position: \"absolute\",\n    top: 8,\n    left: \"50%\",\n    transform: \"translateX(-50%)\",\n    background: \"rgba(239,68,68,0.9)\",\n    padding: \"6px 12px\",\n    borderRadius: \"999px\",\n    zIndex: 40,\n    fontSize: \"13px\"\n  },\n  statusBanner: {\n    position: \"absolute\",\n    top: 8,\n    left: \"50%\",\n    transform: \"translateX(-50%)\",\n    background: \"rgba(22,163,74,0.9)\",\n    padding: \"6px 12px\",\n    borderRadius: \"999px\",\n    zIndex: 40,\n    fontSize: \"13px\"\n  },\n  gestureInfoBanner: {\n    position: \"absolute\",\n    bottom: 8,\n    left: 8,\n    padding: \"6px 10px\",\n    background: \"rgba(15,23,42,0.8)\",\n    borderRadius: \"999px\",\n    fontSize: \"12px\",\n    zIndex: 40\n  },\n  timerBadge: {\n    position: \"absolute\",\n    top: 8,\n    right: 8,\n    padding: \"6px 12px\",\n    background: \"rgba(15,23,42,0.9)\",\n    borderRadius: \"999px\",\n    fontSize: \"13px\",\n    zIndex: 50,\n    border: \"1px solid rgba(148,163,184,0.7)\"\n  },\n  panelTitle: {\n    fontSize: \"16px\",\n    fontWeight: 600,\n    marginBottom: \"2px\"\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"Exam\");","map":{"version":3,"names":["React","useEffect","useRef","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Exam","_s","questions","setQuestions","answers","setAnswers","activeQuestion","setActiveQuestion","activeQuestionRef","loading","setLoading","status","setStatus","error","setError","gestureInfo","setGestureInfo","timeLeft","setTimeLeft","submittedRef","videoRef","canvasRef","fetchQuestions","res","get","data","err","console","handleAnswerChange","index","value","prev","handleFocusQuestion","current","keyboardRows","typeOnActive","key","undefined","qKey","next","slice","formatTime","sec","m","Math","floor","s","toString","padStart","handleSubmit","auto","length","score","forEach","q","idx","userAns","trim","toLowerCase","correct","answer","rollNumber","localStorage","getItem","name","payload","post","success","id","setTimeout","clearTimeout","video","canvas","ctx","getContext","stream","hands","rafId","hoverKeyEl","lastSelectTime","loadScript","src","Promise","resolve","reject","document","querySelector","createElement","async","onload","onerror","Error","body","appendChild","setup","navigator","mediaDevices","getUserMedia","width","height","audio","srcObject","play","videoWidth","videoHeight","HandsCtor","window","Hands","warn","locateFile","file","setOptions","maxNumHands","modelComplexity","minDetectionConfidence","minTrackingConfidence","onResults","loop","readyState","send","image","requestAnimationFrame","message","results","clearRect","multiHandLandmarks","landmarks","HAND_CONNECTIONS","drawConnectors","drawLandmarks","color","lineWidth","e","indexTip","thumbTip","canvasX","x","canvasY","y","fillStyle","beginPath","arc","PI","fill","videoRect","getBoundingClientRect","pageX","left","pageY","top","keyElems","Array","from","querySelectorAll","currentlyHovered","el","rect","right","bottom","style","backgroundColor","transform","now","Date","dx","dy","dist","sqrt","PINCH_THRESHOLD","COOLDOWN","keyVal","dataset","innerText","opacity","cancelAnimationFrame","close","getTracks","t","stop","styles","page","children","errorBanner","fileName","_jsxFileName","lineNumber","columnNumber","statusBanner","gestureInfoBanner","timerBadge","fullScreenWrapper","ref","autoPlay","muted","playsInline","webcam","canvasOverlay","bottomOverlay","keyboardWrapper","map","row","rIndex","keyboardRow","split","ch","i","className","onClick","flex","fontSize","questionsPanel","panelTitle","questionsScroll","questionCard","questionText","question","textarea","placeholder","onChange","target","onFocus","activeHint","submitBtn","_c","background","minHeight","margin","padding","position","fontFamily","overflow","objectFit","pointerEvents","maxWidth","borderRadius","boxShadow","display","justifyContent","gap","marginBottom","flexWrap","minWidth","textAlign","fontWeight","cursor","userSelect","transition","maxHeight","flexDirection","marginTop","overflowY","paddingRight","border","resize","alignSelf","zIndex","$RefreshReg$"],"sources":["C:/Users/dhany/Downloads/gesture-exam-projectgpt/frontend/src/pages/Exam.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Exam() {\r\n  const [questions, setQuestions] = useState([]);\r\n  const [answers, setAnswers] = useState({});\r\n  const [activeQuestion, setActiveQuestion] = useState(null);\r\n  const activeQuestionRef = useRef(null); // always holds latest active question\r\n  const [loading, setLoading] = useState(true);\r\n  const [status, setStatus] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [gestureInfo, setGestureInfo] = useState(\"Gesture keyboard loading...\");\r\n\r\n  // ‚è±Ô∏è TIMER: 30 minutes = 1800 seconds\r\n  const [timeLeft, setTimeLeft] = useState(30 * 60);\r\n  const submittedRef = useRef(false); // to avoid double-submit\r\n\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  // ---------------- FETCH QUESTIONS ----------------\r\n  useEffect(() => {\r\n    async function fetchQuestions() {\r\n      try {\r\n        setLoading(true);\r\n        const res = await axios.get(\"http://localhost:5000/api/questions\");\r\n        setQuestions(res.data || []);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(\"Failed to load questions.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchQuestions();\r\n  }, []);\r\n\r\n  // ---------------- ANSWER HANDLING ----------------\r\n  function handleAnswerChange(index, value) {\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [\"Q\" + (index + 1)]: value,\r\n    }));\r\n  }\r\n\r\n  function handleFocusQuestion(index) {\r\n    setActiveQuestion(index);\r\n    activeQuestionRef.current = index;\r\n  }\r\n\r\n  // ---------------- VIRTUAL KEYBOARD ----------------\r\n  const keyboardRows = [\"QWERTYUIOP\", \"ASDFGHJKL\", \"ZXCVBNM\"];\r\n\r\n  // uses ref + functional update so it always sees latest state\r\n  function typeOnActive(key) {\r\n    const index = activeQuestionRef.current;\r\n    if (index === null || index === undefined) return;\r\n\r\n    const qKey = \"Q\" + (index + 1);\r\n\r\n    setAnswers((prev) => {\r\n      const current = prev[qKey] || \"\";\r\n      let next = current;\r\n\r\n      if (key === \"SPACE\") {\r\n        next = current + \" \";\r\n      } else if (key === \"BACKSPACE\") {\r\n        next = current.slice(0, -1);\r\n      } else if (key === \"CLEAR\") {\r\n        next = \"\";\r\n      } else {\r\n        next = current + key;\r\n      }\r\n\r\n      return { ...prev, [qKey]: next };\r\n    });\r\n  }\r\n\r\n  // helper to format time as mm:ss\r\n  function formatTime(sec) {\r\n    const m = Math.floor(sec / 60);\r\n    const s = sec % 60;\r\n    return `${m.toString().padStart(2, \"0\")}:${s\r\n      .toString()\r\n      .padStart(2, \"0\")}`;\r\n  }\r\n\r\n  // ---------------- SUBMIT EXAM ----------------\r\n  async function handleSubmit(auto = false) {\r\n    try {\r\n      // prevent double-submit\r\n      if (submittedRef.current) return;\r\n      submittedRef.current = true;\r\n\r\n      setStatus(\"\");\r\n      setError(\"\");\r\n\r\n      if (questions.length === 0) {\r\n        setError(\"No questions to submit.\");\r\n        return;\r\n      }\r\n\r\n      let score = 0;\r\n      questions.forEach((q, idx) => {\r\n        const key = \"Q\" + (idx + 1);\r\n        const userAns = (answers[key] || \"\").trim().toLowerCase();\r\n        const correct = (q.answer || \"\").trim().toLowerCase();\r\n        if (correct && userAns === correct) score++;\r\n      });\r\n\r\n      const rollNumber =\r\n        localStorage.getItem(\"studentRollNumber\") || \"Unknown Roll\";\r\n      const name = localStorage.getItem(\"studentName\") || \"Student\";\r\n\r\n      const payload = {\r\n        rollNumber,\r\n        name,\r\n        answers,\r\n        score,\r\n      };\r\n\r\n      const res = await axios.post(\r\n        \"http://localhost:5000/api/submit-exam\",\r\n        payload\r\n      );\r\n\r\n      if (res.data.success) {\r\n        if (auto) {\r\n          setStatus(\r\n            `‚è≥ Time over. Exam auto-submitted. Score: ${score}/${questions.length}`\r\n          );\r\n        } else {\r\n          setStatus(\r\n            `‚úÖ Exam submitted successfully! Score: ${score}/${questions.length}`\r\n          );\r\n        }\r\n      } else {\r\n        setError(\"Failed to submit exam.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Server error while submitting exam.\");\r\n    }\r\n  }\r\n\r\n  // ---------------- TIMER LOGIC (AUTO SUBMIT) ----------------\r\n  useEffect(() => {\r\n    // if already submitted, stop timer\r\n    if (submittedRef.current) return;\r\n\r\n    if (timeLeft <= 0) {\r\n      // time over ‚Üí auto submit\r\n      handleSubmit(true);\r\n      return;\r\n    }\r\n\r\n    const id = setTimeout(() => {\r\n      setTimeLeft((prev) => prev - 1);\r\n    }, 1000);\r\n\r\n    return () => clearTimeout(id);\r\n  }, [timeLeft]); // runs every second\r\n\r\n  // ---------------- GESTURE KEYBOARD (WEBCAM + MEDIAPIPE HANDS) ----------------\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    if (!video || !canvas) return;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    let stream = null;\r\n    let hands = null;\r\n    let rafId = null;\r\n    let hoverKeyEl = null;\r\n    let lastSelectTime = 0;\r\n\r\n    // helper to load external script\r\n    const loadScript = (src) =>\r\n      new Promise((resolve, reject) => {\r\n        if (document.querySelector(`script[src=\"${src}\"]`)) {\r\n          resolve();\r\n          return;\r\n        }\r\n        const s = document.createElement(\"script\");\r\n        s.src = src;\r\n        s.async = true;\r\n        s.onload = () => resolve();\r\n        s.onerror = () =>\r\n          reject(new Error(\"Failed to load script: \" + src));\r\n        document.body.appendChild(s);\r\n      });\r\n\r\n    async function setup() {\r\n      try {\r\n        setGestureInfo(\"Starting webcam...\");\r\n\r\n        // start webcam\r\n        stream = await navigator.mediaDevices.getUserMedia({\r\n          video: { width: 1280, height: 720 },\r\n          audio: false,\r\n        });\r\n        video.srcObject = stream;\r\n        await video.play();\r\n\r\n        // set canvas size to match video\r\n        canvas.width = video.videoWidth || 1280;\r\n        canvas.height = video.videoHeight || 720;\r\n\r\n        setGestureInfo(\"Loading hand tracking...\");\r\n\r\n        // ‚úÖ UPDATED URLs (no version numbers)\r\n        await loadScript(\r\n          \"https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js\"\r\n        );\r\n        await loadScript(\r\n          \"https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js\"\r\n        );\r\n\r\n        // find correct constructor\r\n        let HandsCtor =\r\n          (window.Hands && window.Hands.Hands) || window.Hands || null;\r\n\r\n        if (!HandsCtor) {\r\n          console.warn(\"window.Hands contents:\", window.Hands);\r\n          throw new Error(\r\n            \"MediaPipe Hands class not found. CDN might have changed.\"\r\n          );\r\n        }\r\n\r\n        hands = new HandsCtor({\r\n          locateFile: (file) =>\r\n            `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`,\r\n        });\r\n\r\n        hands.setOptions({\r\n          maxNumHands: 1,\r\n          modelComplexity: 1,\r\n          minDetectionConfidence: 0.7,\r\n          minTrackingConfidence: 0.6,\r\n        });\r\n\r\n        hands.onResults(onResults);\r\n\r\n        setGestureInfo(\r\n          \"‚úÖ Gesture keyboard ready ‚Äì focus a question, move your index finger over keys and pinch to type.\"\r\n        );\r\n\r\n        // main loop\r\n        const loop = async () => {\r\n          if (video.readyState >= 2 && hands) {\r\n            await hands.send({ image: video });\r\n          }\r\n          rafId = requestAnimationFrame(loop);\r\n        };\r\n        loop();\r\n      } catch (err) {\r\n        console.error(err);\r\n        setGestureInfo(\"‚ö†Ô∏è Gesture keyboard disabled: \" + err.message);\r\n      }\r\n    }\r\n\r\n    function onResults(results) {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      if (!results.multiHandLandmarks || results.multiHandLandmarks.length === 0)\r\n        return;\r\n\r\n      const landmarks = results.multiHandLandmarks[0];\r\n\r\n      // draw landmarks if helpers exist\r\n      const HAND_CONNECTIONS =\r\n        (window.Hands && window.Hands.HAND_CONNECTIONS) ||\r\n        window.HAND_CONNECTIONS;\r\n\r\n      if (window.drawConnectors && window.drawLandmarks && HAND_CONNECTIONS) {\r\n        try {\r\n          window.drawConnectors(\r\n            ctx,\r\n            landmarks,\r\n            HAND_CONNECTIONS,\r\n            { color: \"#00FF00\", lineWidth: 3 }\r\n          );\r\n          window.drawLandmarks(ctx, landmarks, {\r\n            color: \"#FF0000\",\r\n            lineWidth: 1,\r\n          });\r\n        } catch (e) {\r\n          // ignore drawing errors\r\n        }\r\n      }\r\n\r\n      const indexTip = landmarks[8];\r\n      const thumbTip = landmarks[4];\r\n\r\n      const canvasX = indexTip.x * canvas.width;\r\n      const canvasY = indexTip.y * canvas.height;\r\n\r\n      // draw pointer\r\n      ctx.fillStyle = \"rgba(0, 123, 255, 0.9)\";\r\n      ctx.beginPath();\r\n      ctx.arc(canvasX, canvasY, 10, 0, Math.PI * 2);\r\n      ctx.fill();\r\n\r\n      // convert to page coordinates to hit-test DOM keys\r\n      const videoRect = video.getBoundingClientRect();\r\n      const pageX = videoRect.left + indexTip.x * videoRect.width;\r\n      const pageY = videoRect.top + indexTip.y * videoRect.height;\r\n\r\n      const keyElems = Array.from(\r\n        document.querySelectorAll(\".gesture-key\")\r\n      );\r\n\r\n      let currentlyHovered = null;\r\n\r\n      keyElems.forEach((el) => {\r\n        const rect = el.getBoundingClientRect();\r\n        if (\r\n          pageX >= rect.left &&\r\n          pageX <= rect.right &&\r\n          pageY >= rect.top &&\r\n          pageY <= rect.bottom\r\n        ) {\r\n          currentlyHovered = el;\r\n          el.style.backgroundColor = \"#3b82f6\";\r\n          el.style.color = \"#ffffff\";\r\n          el.style.transform = \"scale(1.08)\";\r\n        } else {\r\n          el.style.backgroundColor = \"#e5e7eb\";\r\n          el.style.color = \"#111827\";\r\n          el.style.transform = \"scale(1.0)\";\r\n        }\r\n      });\r\n\r\n      const now = Date.now();\r\n\r\n      // distance between thumb & index = pinch\r\n      const dx = thumbTip.x - indexTip.x;\r\n      const dy = thumbTip.y - indexTip.y;\r\n      const dist = Math.sqrt(dx * dx + dy * dy);\r\n      const PINCH_THRESHOLD = 0.05;\r\n      const COOLDOWN = 600; // ms\r\n\r\n      if (currentlyHovered) {\r\n        if (dist < PINCH_THRESHOLD && now - lastSelectTime > COOLDOWN) {\r\n          const keyVal =\r\n            currentlyHovered.dataset.key ||\r\n            currentlyHovered.innerText.trim();\r\n          typeOnActive(keyVal);\r\n          lastSelectTime = now;\r\n\r\n          // flash effect\r\n          currentlyHovered.style.opacity = \"0.7\";\r\n          setTimeout(() => {\r\n            if (currentlyHovered) currentlyHovered.style.opacity = \"1\";\r\n          }, 150);\r\n        }\r\n      }\r\n    }\r\n\r\n    setup();\r\n\r\n    // cleanup\r\n    return () => {\r\n      if (rafId) cancelAnimationFrame(rafId);\r\n      if (hands && hands.close) hands.close();\r\n      if (stream) {\r\n        stream.getTracks().forEach((t) => t.stop());\r\n      }\r\n    };\r\n  }, []); // run once, uses refs + functional setState so it's safe\r\n\r\n  // ---------------- RENDER ----------------\r\n  return (\r\n    <div style={styles.page}>\r\n      {error && <p style={styles.errorBanner}>{error}</p>}\r\n      {status && !error && <p style={styles.statusBanner}>{status}</p>}\r\n\r\n      {gestureInfo && (\r\n        <div style={styles.gestureInfoBanner}>{gestureInfo}</div>\r\n      )}\r\n\r\n      {/* Timer badge */}\r\n      <div style={styles.timerBadge}>‚è≥ Time Left: {formatTime(timeLeft)}</div>\r\n\r\n      <div style={styles.fullScreenWrapper}>\r\n        {/* Big Webcam */}\r\n        <video\r\n          ref={videoRef}\r\n          autoPlay\r\n          muted\r\n          playsInline\r\n          style={styles.webcam}\r\n        />\r\n\r\n        {/* Canvas overlay for hand drawing + pointer */}\r\n        <canvas ref={canvasRef} style={styles.canvasOverlay} />\r\n\r\n        {/* Dark gradient overlay at bottom (for keyboard contrast) */}\r\n        <div style={styles.bottomOverlay} />\r\n\r\n        {/* Virtual Keyboard overlay at bottom */}\r\n        <div id=\"gesture-keyboard\" style={styles.keyboardWrapper}>\r\n          {keyboardRows.map((row, rIndex) => (\r\n            <div key={rIndex} style={styles.keyboardRow}>\r\n              {row.split(\"\").map((ch, i) => (\r\n                <div\r\n                  key={i}\r\n                  className=\"gesture-key\"\r\n                  data-key={ch}\r\n                  style={styles.key}\r\n                  onClick={() => typeOnActive(ch)}\r\n                >\r\n                  {ch}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ))}\r\n\r\n          {/* Special keys row */}\r\n          <div style={styles.keyboardRow}>\r\n            <div\r\n              className=\"gesture-key\"\r\n              data-key=\"SPACE\"\r\n              style={{ ...styles.key, flex: 3.5, fontSize: \"22px\" }}\r\n              onClick={() => typeOnActive(\"SPACE\")}\r\n            >\r\n              SPACE\r\n            </div>\r\n            <div\r\n              className=\"gesture-key\"\r\n              data-key=\"BACKSPACE\"\r\n              style={{ ...styles.key, flex: 1.5, fontSize: \"22px\" }}\r\n              onClick={() => typeOnActive(\"BACKSPACE\")}\r\n            >\r\n              ‚å´\r\n            </div>\r\n            <div\r\n              className=\"gesture-key\"\r\n              data-key=\"CLEAR\"\r\n              style={{ ...styles.key, flex: 1.5, fontSize: \"20px\" }}\r\n              onClick={() => typeOnActive(\"CLEAR\")}\r\n            >\r\n              CLEAR\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Questions panel in corner */}\r\n        <div style={styles.questionsPanel}>\r\n          {loading && <p>Loading questions...</p>}\r\n\r\n          {!loading && questions.length === 0 && (\r\n            <p>No questions available. Contact admin.</p>\r\n          )}\r\n\r\n          {!loading && questions.length > 0 && (\r\n            <>\r\n              <h3 style={styles.panelTitle}>Questions</h3>\r\n              <div style={styles.questionsScroll}>\r\n                {questions.map((q, idx) => (\r\n                  <div key={idx} style={styles.questionCard}>\r\n                    <p style={styles.questionText}>\r\n                      <b>Q{idx + 1}:</b> {q.question || q.q || \"Question\"}\r\n                    </p>\r\n                    <textarea\r\n                      style={styles.textarea}\r\n                      placeholder=\"Type your answer here...\"\r\n                      value={answers[\"Q\" + (idx + 1)] || \"\"}\r\n                      onChange={(e) =>\r\n                        handleAnswerChange(idx, e.target.value)\r\n                      }\r\n                      onFocus={() => handleFocusQuestion(idx)}\r\n                    />\r\n                    {activeQuestion === idx && (\r\n                      <p style={styles.activeHint}>\r\n                        üîµ Keyboard / gestures typing here\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <button\r\n                style={styles.submitBtn}\r\n                onClick={() => handleSubmit(false)}\r\n              >\r\n                Submit Exam\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  page: {\r\n    background: \"#000\",\r\n    minHeight: \"100vh\",\r\n    margin: 0,\r\n    padding: 0,\r\n    position: \"relative\",\r\n    color: \"#fff\",\r\n    fontFamily: \"sans-serif\",\r\n  },\r\n  fullScreenWrapper: {\r\n    position: \"relative\",\r\n    width: \"100vw\",\r\n    height: \"100vh\",\r\n    overflow: \"hidden\",\r\n  },\r\n  webcam: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    objectFit: \"cover\",\r\n  },\r\n  canvasOverlay: {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: 0,\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    pointerEvents: \"none\",\r\n  },\r\n  bottomOverlay: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    height: \"30vh\",\r\n    background:\r\n      \"linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.2), transparent)\",\r\n    pointerEvents: \"none\",\r\n  },\r\n\r\n  // BIGGER KEYBOARD\r\n  keyboardWrapper: {\r\n    position: \"absolute\",\r\n    left: \"50%\",\r\n    bottom: \"2rem\",\r\n    transform: \"translateX(-50%)\",\r\n    width: \"95%\",\r\n    maxWidth: \"1200px\",\r\n    padding: \"18px\",\r\n    borderRadius: \"22px\",\r\n    background: \"rgba(15,23,42,0.95)\",\r\n    boxShadow: \"0 10px 30px rgba(0,0,0,0.65)\",\r\n  },\r\n  keyboardRow: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    gap: \"10px\",\r\n    marginBottom: \"12px\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  key: {\r\n    flex: 1,\r\n    minWidth: 55,\r\n    maxWidth: 90,\r\n    padding: \"16px 10px\",\r\n    background: \"#e5e7eb\",\r\n    borderRadius: \"12px\",\r\n    textAlign: \"center\",\r\n    fontWeight: 700,\r\n    fontSize: \"20px\",\r\n    cursor: \"pointer\",\r\n    userSelect: \"none\",\r\n    color: \"#111827\",\r\n    transition:\r\n      \"transform 0.1s ease, background-color 0.1s ease, color 0.1s ease, opacity 0.1s ease\",\r\n  },\r\n\r\n  // Questions panel\r\n  questionsPanel: {\r\n    position: \"absolute\",\r\n    top: \"1.25rem\",\r\n    right: \"1.25rem\",\r\n    width: \"320px\",\r\n    maxHeight: \"75vh\",\r\n    padding: \"12px\",\r\n    borderRadius: \"16px\",\r\n    background: \"rgba(255,255,255,0.96)\",\r\n    color: \"#111827\",\r\n    boxShadow: \"0 8px 25px rgba(0,0,0,0.5)\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n  questionsScroll: {\r\n    marginTop: \"6px\",\r\n    overflowY: \"auto\",\r\n    paddingRight: \"4px\",\r\n  },\r\n  questionCard: {\r\n    marginBottom: \"8px\",\r\n    padding: \"6px\",\r\n    borderRadius: \"8px\",\r\n    background: \"#f9fafb\",\r\n    border: \"1px solid #e5e7eb\",\r\n  },\r\n  questionText: {\r\n    marginBottom: \"4px\",\r\n    fontSize: \"14px\",\r\n  },\r\n  textarea: {\r\n    width: \"100%\",\r\n    minHeight: \"55px\",\r\n    borderRadius: \"6px\",\r\n    border: \"1px solid #d1d5db\",\r\n    padding: \"6px\",\r\n    resize: \"vertical\",\r\n    fontSize: \"13px\",\r\n  },\r\n  submitBtn: {\r\n    marginTop: \"6px\",\r\n    padding: \"8px 12px\",\r\n    background: \"#16a34a\",\r\n    color: \"white\",\r\n    borderRadius: \"8px\",\r\n    border: \"none\",\r\n    cursor: \"pointer\",\r\n    alignSelf: \"flex-end\",\r\n    fontSize: \"14px\",\r\n  },\r\n  activeHint: {\r\n    fontSize: \"11px\",\r\n    color: \"#2563eb\",\r\n    marginTop: \"3px\",\r\n  },\r\n  errorBanner: {\r\n    position: \"absolute\",\r\n    top: 8,\r\n    left: \"50%\",\r\n    transform: \"translateX(-50%)\",\r\n    background: \"rgba(239,68,68,0.9)\",\r\n    padding: \"6px 12px\",\r\n    borderRadius: \"999px\",\r\n    zIndex: 40,\r\n    fontSize: \"13px\",\r\n  },\r\n  statusBanner: {\r\n    position: \"absolute\",\r\n    top: 8,\r\n    left: \"50%\",\r\n    transform: \"translateX(-50%)\",\r\n    background: \"rgba(22,163,74,0.9)\",\r\n    padding: \"6px 12px\",\r\n    borderRadius: \"999px\",\r\n    zIndex: 40,\r\n    fontSize: \"13px\",\r\n  },\r\n  gestureInfoBanner: {\r\n    position: \"absolute\",\r\n    bottom: 8,\r\n    left: 8,\r\n    padding: \"6px 10px\",\r\n    background: \"rgba(15,23,42,0.8)\",\r\n    borderRadius: \"999px\",\r\n    fontSize: \"12px\",\r\n    zIndex: 40,\r\n  },\r\n  timerBadge: {\r\n    position: \"absolute\",\r\n    top: 8,\r\n    right: 8,\r\n    padding: \"6px 12px\",\r\n    background: \"rgba(15,23,42,0.9)\",\r\n    borderRadius: \"999px\",\r\n    fontSize: \"13px\",\r\n    zIndex: 50,\r\n    border: \"1px solid rgba(148,163,184,0.7)\",\r\n  },\r\n  panelTitle: {\r\n    fontSize: \"16px\",\r\n    fontWeight: 600,\r\n    marginBottom: \"2px\",\r\n  },\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}